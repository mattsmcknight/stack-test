# AWS Secrets Manager structure - secrets created by bootstrap script
# This file documents the expected secrets but doesn't create them
# Bootstrap script creates these in AWS Secrets Manager:
#
# stack-test/dev/aurora - Aurora database credentials
#   - username: postgres
#   - password: <generated>
#   - host: postgres.supabase.internal
#   - port: 5432
#   - database: postgres
#
# stack-test/dev/supabase - Supabase application secrets
#   - jwt-secret: <generated 64 char>
#   - anon-key: <generated JWT>
#   - service-role-key: <generated JWT>
#   - dashboard-username: supabase
#   - dashboard-password: <generated>
#
# stack-test/dev/smtp - SMTP credentials (optional)
#   - host: ""
#   - port: "587"
#   - user: ""
#   - password: ""
#   - sender: "noreply@example.com"
#
# Note: Secrets are created by k8s/bootstrap/eksctl/bootstrap.sh
# and synced to Kubernetes via External Secrets Operator
---
# ClusterSecretStore - cluster-wide access to AWS Secrets Manager
apiVersion: external-secrets.io/v1beta1
kind: ClusterSecretStore
metadata:
  name: aws-secrets-manager
spec:
  provider:
    aws:
      service: SecretsManager
      region: us-east-1  # Patched by overlay
      auth:
        jwt:
          serviceAccountRef:
            name: external-secrets
            namespace: external-secrets
