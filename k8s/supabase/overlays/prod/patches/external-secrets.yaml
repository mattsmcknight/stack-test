# Patch ExternalSecrets to use prod environment secrets
---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: supabase-db
spec:
  data:
    - secretKey: dbpassword
      remoteRef:
        key: stack-test/prod/aurora
        property: password
    - secretKey: jwtsecret
      remoteRef:
        key: stack-test/prod/supabase
        property: jwt-secret
    - secretKey: anonkey
      remoteRef:
        key: stack-test/prod/supabase
        property: anon-key
    - secretKey: servicerolekey
      remoteRef:
        key: stack-test/prod/supabase
        property: service-role-key
    - secretKey: dashboardusername
      remoteRef:
        key: stack-test/prod/supabase
        property: dashboard-username
    - secretKey: dashboardpassword
      remoteRef:
        key: stack-test/prod/supabase
        property: dashboard-password
---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: supabase-smtp
spec:
  data:
    - secretKey: smtp-host
      remoteRef:
        key: stack-test/prod/smtp
        property: host
    - secretKey: smtp-port
      remoteRef:
        key: stack-test/prod/smtp
        property: port
    - secretKey: smtp-user
      remoteRef:
        key: stack-test/prod/smtp
        property: user
    - secretKey: smtp-pass
      remoteRef:
        key: stack-test/prod/smtp
        property: password
    - secretKey: smtp-sender
      remoteRef:
        key: stack-test/prod/smtp
        property: sender
